

<style type="text/css">

    #tryLogin
    {
        max-width: 300px;
        margin: 0 auto 20px;
    }

    .form-signin {
        max-width: 300px;
        padding: 19px 29px 29px;
        margin: 0 auto 20px;
        background-color: #fff;
        border: 1px solid #e5e5e5;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
        -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
        box-shadow: 0 1px 2px rgba(0,0,0,.05);
    }

    .form-signin .form-signin-heading,
    .form-signin .checkbox {
        margin-bottom: 10px;
    }
    .form-signin input[type="text"],
    .form-signin input[type="password"] {
        font-size: 16px;
        height: auto;
        margin-bottom: 15px;
        padding: 7px 9px;
    }

</style>


<form id="form-login" class="form-signin">
    <h2 class="form-signin-heading">Login</h2>

    <div id="erroLoginEmpty" class="alert alert-error" style="display:none">
        Login/Senha requeridos
    </div>
    
    <div id="erroLoginServer" class="alert alert-error" style="display:none">
        
    </div>




    <div class="control-group"><input id="login" type="text" class="input-block-level" placeholder="login"></div>
    <div class="control-group"><input id="senha" type="password" class="input-block-level" placeholder="senha"></div>
    <button id="btnIr" class="btn btn-large btn-primary" type="submit">Ir</button>
</form>

<div id="tryLogin" class="alert alert-success" style="display:none">
    <img src="img/ajax-loader.gif"> Realizando login...
</div>


<script>


    $(document).ready(function() {



    });

    $("#btnIr").click(function(event) {

        $valido = true;

        $("#form-login input").map(function() {
            if ($(this).val().length == 0)
            {
                $valido = false;
                $(this).parents("div").addClass("error");
            }
            else
            {
                $(this).parents("div").removeClass("error");
            }
        });

        if ($valido)
        {
            $("#erroLoginEmpty").hide();
            $("#erroLoginServer").hide();
            $("#btnIr").addClass("disabled");
            $("#tryLogin").show();

            data = JSON.stringify({"login": $("#login").val(), "senha": $("#senha").val()});

            $.ajax({
                type: "post",
                url: rootUrl+"usuario/login",
                dataType: "json",
                
                data:data,
                success: onSuccessLogin,
                error: onErrorLogin
            });



        }
        else
        {
            $("#erroLoginServer").hide();
            $("#erroLoginEmpty").show("slide");
        }

        event.preventDefault();


    });

    function onSuccessLogin(data) {
        
        $("#tryLogin").hide();
        $("#erroLoginServer").hide();
        $("#erroLoginEmpty").hide();
        
        console.log(data);
        
        
    }

    function onErrorLogin(error) {
        $("#tryLogin").hide();
        $("#erroLoginServer").html(error.responseText);
        $("#erroLoginServer").show("slide");
        $("#btnIr").removeClass("disabled");
    }


</script>

